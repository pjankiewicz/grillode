HTTP/1.1 200
Content-type: text/html

<html>

<head>
    <title>Streaming HTML Chat with Node.js | Grillode</title>
    <style>

        * {font-family:georgia, garamond, serif; font-size:15px;}
        body {margin:0 0 90px 0;}
        table {margin:3px 10px; padding:0;}
        .input {position:fixed; bottom:0; background:#ccc;
                margin:0; width:100%; padding:20px;
                border-top:1px solid #999;}
        .text {width:50%; border:1px solid #999; padding:7px;}
        .leave {display:none;}
        .button {padding:5px 15px; cursor:pointer;}

    </style>
    <script>
    
	    try {
		    var xhr = new ActiveXObject('Microsoft.XmlHttp');
	    } catch (e) {
		    try {
			    var xhr = new XMLHttpRequest();
		    } catch (e) {}
	    }
	    
        var onSubmit = function(form) {
            if (form.button.value == form.button.defaultValue) {
                form.button.value = 'Send Message';
                form.leave.style.display = 'inline';
            }
            if (xhr) {
		        xhr.open('GET', '?uuid=' + form.uuid.value + 
		                 '&message=' + escape(form.message.value), true);
		        xhr.send(null);
		        form.message.value = '';
		        form.message.focus();
            }
            return false;
        };
        
        var onFocus = function(input) {
            if (input.value == input.defaultValue) {
                input.value = '';
            }
            return true;
        };
        
        var onMessage = function() {
            window.scrollBy(0, 10000);
        };
        
    </script>
</head>

<body>

    <form class="input" onsubmit="return onSubmit(this);">
        <input name="uuid" type="hidden" value="%uuid%" />
        <input name="message" type="text" value="Please enter your name"
            onfocus="return onFocus(this);" class="text" />
        <input type="submit" name="button" value="Join" class="button" />
        <input type="button" name="leave" value="Leave" class="button leave"
            onclick="location.reload();" />
    </form>

